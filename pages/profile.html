<!DOCTYPE html>
<html lang="en">


  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


    ​
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
      ​ rel="stylesheet" />

    <title>OnlineMarket</title>

    ​ <!-- Bootstrap core CSS -->
    ​
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    ​ <!-- Additional CSS Files -->
    ​
    <link rel="stylesheet" href="assets/css/fontawesome.css" />
    ​
    <link rel="stylesheet" href="assets/css/templatemo-cyborg-gaming.css" />
    ​
    <link rel="stylesheet" href="assets/css/owl.css" />
    ​
    <link rel="stylesheet" href="assets/css/animate.css" />
    ​
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
    ​ <!--

TemplateMo 579 Cyborg Gaming

https://templatemo.com/tm-579-cyborg-gaming

-->
  </head>

  <body onload="profileload();getInventory()">
    <!-- ***** Preloader Start ***** -->

    <div id="js-preloader" class="js-preloader">
      <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>

    ​ <!-- ***** Preloader End ***** -->

    ​ <!-- ***** Header Area Start ***** -->

    <header class="header-area header-sticky">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <nav class="main-nav">
              <!-- ***** Logo Start ***** -->
              <a href="index" class="logo">
                <img src="assets/images/logo.png" alt="" />
              </a>
              <!-- ***** Logo End ***** -->
              <!-- ***** Search End ***** -->
              <div class="search-input">
                <form id="search" action="#">
                  <input type="text" placeholder="Type Something" id="searchText" name="searchKeyword"
                    onkeypress="handle" />
                  <i class="fa fa-search"></i>
                </form>
              </div>
              <!-- ***** Search End ***** -->
              <!-- ***** Menu Start ***** -->
              <ul class="nav">
                <li><a href="index">Home</a></li>
                <li><a href="cart">Cart</a></li>
                <li>
                  <a href="profile" class="active">Profile <img src="assets/images/profile-header.jpg" alt="" /></a>
                </li>
              </ul>
              <a class="menu-trigger">
                <span>Menu</span>
              </a>
              <!-- ***** Menu End ***** -->
            </nav>
          </div>
        </div>
      </div>
    </header>

    ​ <!-- ***** Header Area End ***** -->

    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="page-content">
            <!-- ***** Banner Start ***** -->
            <div class="row">
              <div class="col-lg-12">
                <div class="main-profile">
                  <div class="row">
                    <div class="col-lg-4 align-content-center">
                      <form method="get" enctype="multipart/form-data">
                        <label for="inputFile">
                          <img id="userPortrait" src="assets/images/subpicture.png" />
                        </label>
                        <input type="file" id="inputFile" style="display: none; ">
                      </form>
                    </div>
                    <div class="col-lg-4 align-self-center">
                      <div class="main-info header-text">
                        <span>Online</span>
                        <h4 id="userName"></h4>
                        <p>No information was provided.</p>
                        <div class="main-border-button">
                          <a href="login" onclick="logout()">Log out</a>
                        </div>
                        <div style="display: inline-block; margin: 10px;">
                          <a href="upload">Upload</a>
                        </div>
                        <div style="display: inline-block; margin: 10px;">
                          <a href="history">History</a>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 align-self-center">
                      <ul>
                        <li>Games <span id="userGameCount">0</span></li>
                        <li>Achievement <span>0</span></li>
                        <li>Friends Online <span>0</span></li>
                        <li>Perfectly Achieved <span>0</span></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- ***** Banner End ***** -->


            ​ <!-- ***** Gaming Library Start ***** -->

            <div class="gaming-library profile-library">
              <div class="col-lg-12" id="row">
                <div class="heading-section">
                  <h4><em>Your Gaming</em> Library</h4>
                </div>
              </div>
            </div>

            ​ <!-- ***** Gaming Library End ***** -->
            ​
          </div>
          ​
        </div>
        ​
      </div>
      ​
    </div>

    ​ <!-- Scripts -->
    ​ <!-- Bootstrap core JavaScript -->

    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <script src="assets/js/isotope.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/tabs.js"></script>
    <script src="assets/js/popup.js"></script>
    <script src="assets/js/custom.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="assets/js/user.js"></script>


    <script>
      var file = document.getElementById("inputFile");
      file.addEventListener("change", function (event) {
        let reader = new FileReader();
        var file1 = file.files[0]
        reader.readAsDataURL(file1);
        reader.onload = function (result) {
          console.log(reader.result)


          var settings = {
            "url": "http://localhost:8080/user/uploadPortrait",
            "method": "POST",
            "timeout": 0,
            "headers": {
              "Content-Type": "application/json"
            },
            "data": JSON.stringify({
              "userPortrait": reader.result,
            }),
          };

          $.ajax(settings).done(function (response) {
            if (response["status"] == "Accepted") {
              location.reload()
            } else {
              alert("Fail!");
            }
            console.log(response);
          });

        }
      })
    </script>
  </body>

</html>